(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{2667:(e,t,s)=>{Promise.resolve().then(s.bind(s,9316))},2869:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var n=s(5155);s(2115);var r=s(4624),l=s(2085),a=s(2596),c=s(9688);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:l,asChild:o=!1,...d}=e,u=o?r.DX:"button";return(0,n.jsx)(u,{"data-slot":"button",className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,a.$)(t))}(i({variant:s,size:l,className:t})),...d})}},6695:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>l,Zp:()=>r});var n=s(5155);function r(e){let{className:t="",...s}=e;return(0,n.jsx)("div",{className:"rounded-2xl border bg-white shadow-sm border-gray-200 "+t,...s})}function l(e){let{className:t="",...s}=e;return(0,n.jsx)("div",{className:"p-6 "+t,...s})}s(2115)},9316:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var n=s(5155),r=s(2115),l=s(2869),a=s(6695),c=s(7948);function i(e){let{message:t,show:s}=e;return s?(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 z-50",children:(0,n.jsx)("div",{className:"bg-white rounded-2xl shadow-lg px-8 py-6 text-3xl font-bold text-green-600 animate-bounce",children:t})}):null}function o(e){if(e<=0||!Number.isInteger(e))return{c:0,r:0};let t=1,s=e;for(let e=2;e*e<=s;e++)for(;s%(e*e)==0;)s/=e*e,t*=e;return{c:t,r:s}}function d(e,t){if(1===t)return{A:e,R:1};let{c:s,r:n}=o(t);return{A:e*s,R:n}}function u(e){let t=e.replace(/\s+/g,"");if(!t)return null;if(/^[+-]?\d+$/.test(t))return{a:parseInt(t,10),b:1};let s=t.match(/^([+-]?\d+)?√(\d+)$/);if(s){let e=s[1]?parseInt(s[1],10):1,t=parseInt(s[2],10);return t<=0?null:{a:e,b:t}}return null}function x(e,t){return 0===e?"0":1===t?String(e):1===e?"√".concat(t):-1===e?"-√".concat(t):"".concat(e,"√").concat(t)}function m(e){let t=new Map;for(let s of e)t.set(s.R,(t.get(s.R)||0)+s.A);let s=[];for(let[e,n]of t.entries())0!==n&&s.push({A:n,R:e});return s.sort((e,t)=>e.R-t.R),s}function h(e){let{total:t,maxQ:s}=e;return(0,n.jsxs)("div",{className:"w-full max-w-3xl mb-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,n.jsx)("span",{className:"text-sm text-gray-700",children:"進捗"}),(0,n.jsxs)("span",{className:"text-sm font-semibold",children:[t," / ",s]})]}),(0,n.jsx)("div",{className:"grid grid-cols-10 gap-1",children:Array.from({length:s}).map((e,s)=>(0,n.jsx)("div",{className:["h-3 rounded",s<t?"bg-green-500":"bg-gray-300"].join(" ")},s))})]})}function f(e){let{onInput:t}=e;return(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-3",children:["7","8","9","√","4","5","6","\xd7","1","2","3","⌫","0","C"].map(e=>(0,n.jsx)(l.$,{variant:"outline",onClick:()=>t(e),"aria-label":"キー ".concat(e),children:e},e))})}function p(){let[e,t]=(0,r.useState)("quiz"),[s,p]=(0,r.useState)(0),[g,b]=(0,r.useState)(0),[j,v]=(0,r.useState)(!1),[N,y]=(0,r.useState)(!1),[A,k]=(0,r.useState)([]),[R,w]=(0,r.useState)(null),[C,$]=(0,r.useState)(""),[S,z]=(0,r.useState)(null),[_,W]=(0,r.useState)(""),[Z,D]=(0,r.useState)(""),I=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function M(){if(.5>Math.random()){let e=I(2,40);1===(e=o(e).r||e)&&(e=2);let t=I(1,5),s=I(1,5),n=e*t*t,r=e*s*s,l=I(1,5),a=I(1,5),c=.5>Math.random(),i="".concat(1===l?"":l,"√").concat(n),u="".concat(1===a?"":a,"√").concat(r),x=d(l,n),h=d(a,r),f=x.A+(c?h.A:-h.A);return f<0?(f=h.A-(c?-x.A:x.A),{text:"".concat(u," ").concat(c?"+":"-"," ").concat(i),expect:{type:"sum",sum:m([{A:h.A,R:h.R},{A:c?x.A:-x.A,R:x.R}])}}):{text:"".concat(i," ").concat(c?"+":"-"," ").concat(u),expect:{type:"sum",sum:m([{A:x.A,R:x.R},{A:c?h.A:-h.A,R:h.R}])}}}{let e=I(1,4),t=I(1,4),s=I(2,40),n=I(2,40),r="".concat(1===e?"":e,"√").concat(s," \xd7 ").concat(1===t?"":t,"√").concat(n),l=function(e,t){let s=d(e.a,e.b),n=d(t.a,t.b);return d(s.A*n.A,s.R*n.R)}({a:e,b:s},{a:t,b:n});return l.A<0&&(l.A=-l.A),{text:r,expect:{type:"mul",A:l.A,R:l.R}}}}function q(e){let t="easy2"===e?I(10,99):I(100,999),s="√".concat(t," を簡単に："),n=d(1,t);return{text:s,expect:{type:"simp",A:n.A,R:n.R}}}function E(e){if(w(e),p(0),b(0),v(!1),k([]),W(""),"ops"===e){let e=M();$(e.text),z(e.expect)}else{let t=q(e);$(t.text),z(t.expect)}}return(0,n.jsxs)("div",{className:"flex flex-col items-center min-h-screen bg-gray-100 p-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-3",children:"根号トレーナー（クイズ / 計算機）"}),(0,n.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,n.jsx)(l.$,{onClick:()=>t("quiz"),className:"quiz"===e?"":"bg-gray-200 text-gray-800",children:"Quiz"}),(0,n.jsx)(l.$,{onClick:()=>t("calc"),className:"calc"===e?"":"bg-gray-200 text-gray-800",children:"Calculator"})]}),(0,n.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,n.jsx)(h,{total:g,maxQ:10}),j&&10===s&&(0,n.jsx)(c.A,{}),(0,n.jsx)(i,{message:"\uD83C\uDF89 正解！",show:N}),R?j?(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Zp,{className:"mb-4",children:(0,n.jsxs)(a.Wu,{className:"p-4 text-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"終了！"}),(0,n.jsxs)("p",{className:"mb-2",children:["スコア: ",(0,n.jsx)("span",{className:"font-semibold",children:s})," / ",10]}),10===s?(0,n.jsx)("p",{className:"text-green-600 font-bold text-xl",children:"全問正解！おめでとう\uD83C\uDF89"}):(0,n.jsx)("p",{className:"text-red-600 font-bold text-xl",children:"また挑戦してね！"}),(0,n.jsxs)("div",{className:"mt-4 flex gap-2 justify-center",children:[(0,n.jsx)(l.$,{onClick:()=>E(R),children:"もう一度"}),(0,n.jsx)(l.$,{variant:"outline",onClick:()=>{w(null),k([]),p(0),b(0),v(!1)},children:"モード選択へ"})]})]})}),(0,n.jsx)("div",{className:"space-y-2",children:A.map((e,t)=>(0,n.jsxs)("div",{className:"border rounded-lg p-3 bg-white",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"font-semibold",children:[t+1,". ",e.question]}),(0,n.jsx)("div",{className:e.isCorrect?"text-green-600 font-bold":"text-red-600 font-bold",children:e.isCorrect?"正解":"不正解"})]}),(0,n.jsxs)("div",{className:"mt-1 text-sm text-gray-700",children:[(0,n.jsxs)("div",{children:["正解：",(0,n.jsx)("span",{className:"font-mono",children:e.correct})]}),(0,n.jsxs)("div",{children:["あなたの答え：",(0,n.jsx)("span",{className:"font-mono",children:e.user||"—"})]})]})]},t))})]}):(0,n.jsx)(a.Zp,{className:"p-6",children:(0,n.jsxs)(a.Wu,{children:[(0,n.jsx)("p",{className:"text-xl mb-3",children:C}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("div",{className:"border rounded px-3 py-2 text-right text-2xl bg-white select-none",children:_.length?_:"…"})}),(0,n.jsx)(f,{onInput:function(e){"⌫"===e?W(e=>e.slice(0,-1)):"C"===e?W(""):"+"===e?W(e=>!e||/[+\-]$/.test(e)?e:e+"+"):"-"===e?W(e=>(e&&/[+\-(]$/.test(e),e+"-")):W(t=>t+e)}}),Z&&(0,n.jsx)("p",{className:"text-red-600 font-semibold mt-2",children:Z}),(0,n.jsx)("div",{className:"flex gap-2 mt-3",children:(0,n.jsx)(l.$,{onClick:function(){if(j||!S)return;let e=function(e){let t=e.replace(/\s+/g,"");if(!t||!S)return null;if("sum"===S.type){let e=function(e){let t=e.replace(/\s+/g,"");if(!t)return null;let s=[],n=0;for(;n<t.length;){let e="+";("+"===t[n]||"-"===t[n])&&(e=t[n++]);let r="";for(;n<t.length&&"+"!==t[n]&&"-"!==t[n];)r+=t[n++];if(!r)return null;let l=u(r);if(!l)return null;let{A:a,R:c}=d("-"===e?-l.a:l.a,l.b);s.push("".concat(a,"|").concat(c))}return m(s.map(e=>{let[t,s]=e.split("|").map(Number);return{A:t,R:s}}))}(t);if(!e)return null;let s=S.sum;if(s.length!==e.length)return{ok:!1,canonical:e.map(e=>x(e.A,e.R)).join(" + ")||"0"};for(let t=0;t<s.length;t++)if(s[t].R!==e[t].R||s[t].A!==e[t].A)return{ok:!1,canonical:e.map(e=>x(e.A,e.R)).join(" + ")||"0"};return{ok:!0,canonical:e.map(e=>x(e.A,e.R)).join(" + ")||"0"}}if("mul"===S.type||"simp"===S.type){let e=u(t);if(!e)return null;let s=d(e.a,e.b);return{ok:s.A===S.A&&s.R===S.R,canonical:x(s.A,s.R)}}return null}(_);if(!e)return;let t=e.ok,s="";s="sum"===S.type?S.sum.length?S.sum.map(e=>x(e.A,e.R)).join(" + "):"0":x(S.A,S.R),k(n=>[...n,{question:C,correct:s,user:e.canonical,isCorrect:t}]),t?(p(e=>e+1),y(!0),setTimeout(()=>y(!1),800),D(""),b(e=>{let t=e+1;if(t>=10)v(!0);else if(R)if(W(""),"ops"===R){let e=M();$(e.text),z(e.expect)}else{let e=q(R);$(e.text),z(e.expect)}return t})):D("間違いだよ。もう一度チャレンジ！")},children:"回答する"})})]})}):(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-3",children:[(0,n.jsx)(a.Zp,{children:(0,n.jsxs)(a.Wu,{className:"p-4 flex flex-col gap-2",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"【初級】２桁の数値"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"√n を最簡へ（10–99）"}),(0,n.jsx)(l.$,{onClick:()=>E("easy2"),children:"スタート"})]})}),(0,n.jsx)(a.Zp,{children:(0,n.jsxs)(a.Wu,{className:"p-4 flex flex-col gap-2",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"【中級】３桁の数値"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"√n を最簡へ（100–999）"}),(0,n.jsx)(l.$,{onClick:()=>E("easy3"),children:"スタート"})]})}),(0,n.jsx)(a.Zp,{children:(0,n.jsxs)(a.Wu,{className:"p-4 flex flex-col gap-2",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"【上級】演算クイズ"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"足し引き（同種のみ）/ 掛け算（異なる根OK）"}),(0,n.jsx)(l.$,{onClick:()=>E("ops"),children:"スタート"})]})}),"            "]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[948,212,441,684,358],()=>t(2667)),_N_E=e.O()}]);