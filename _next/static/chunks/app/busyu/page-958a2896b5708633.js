(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{300:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),l=s(2115);function n(e){let{radicals:t,onSelect:s}=e;return(0,l.useEffect)(()=>{console.log(JSON.stringify(t,null,2))},[t]),(0,r.jsx)("div",{className:"grid gird-cols-1 md:grid-cols-2  gap-4",children:t.filter(e=>{let{count:t}=e;return t>3}).map(e=>{let{radical:t,count:l,reading:n}=e;return(0,r.jsx)("button",{onClick:()=>s(t),className:"bg-white hover:bg-blue-100 rounded-lg p-4 shadow text-center transition-colors",children:(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("span",{className:"ml-4 text-4xl font-bold mb-1",children:t}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["（漢字数：",l,"）"]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:"ml-2text-gray-700 mb-1",children:["部首名: ",n]})})]})},t)})})}},690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(5155),l=s(2115),n=s(5695),a=s(300);function c(e){let{onStart:t}=e;return(0,r.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8 mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ゲームの説明"}),(0,r.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-2 mb-6 list-disc list-inside",children:[(0,r.jsx)("li",{children:"ひらがなで読み方を入力"}),(0,r.jsx)("li",{children:"制限時間は 60 秒"}),(0,r.jsx)("li",{children:"同じ漢字は 1 度だけカウント"}),(0,r.jsx)("li",{children:"高学年の漢字は高得点"})]}),(0,r.jsx)("button",{onClick:t,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"ゲームスタート！"})]})}var i=s(9250);function d(e){let{foundKanji:t,total:s}=e;return 0===t.length?null:(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-3",children:["見つけた漢字 (",t.length," / ",s,")"]}),(0,r.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:t.map(e=>(0,r.jsxs)("div",{className:"text-center bg-white rounded-lg p-3 shadow",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:e.char}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[0]})]},e.char))})]})}var o=s(5678);function x(e){return e.replace(/[\u3041-\u3096]/g,e=>String.fromCharCode(e.charCodeAt(0)+96))}function m(e){let{allKanji:t,foundKanji:s}=e,l=new Set(s.map(e=>e.char)),n={};return t.forEach(e=>{let t=e.kanken;n[t]||(n[t]=[]),n[t].push(e)}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"全漢字一覧（学年別）"}),Object.entries(n).sort((e,t)=>Number(t[0])-Number(e[0])).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 border-b border-gray-300 pb-1",children:(0,o.b)(Number(t))}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-4",children:s.map(e=>{let t=l.has(e.char);return(0,r.jsxs)("div",{className:"relative group text-center rounded-lg p-3 shadow transition-all cursor-pointer ".concat(t?"bg-white text-blue-800 border border-blue-200":"bg-red-100 text-red-600 border border-red-300"),children:[(0,r.jsx)("div",{className:"text-3xl font-bold mb-1",children:e.char}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[1]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:x(e.readings[0])}),(0,r.jsxs)("div",{className:"absolute z-10 hidden group-hover:block bg-white border text-black border-gray-300 rounded-lg p-3 text-sm    text-left shadow-lg w-60 top-full mt-2 left-1/2 transform -translate-x-1/2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"漢字:"})," ",e.char]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"音読み:"})," ",x(e.readings[0])]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"訓読み:"})," ",e.readings[1]]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"意味:"})," ",e.meaning]})]})]},e.char)})})]},t)})]})}var u=s(7948),h=s(5718);function g(e){let{score:t,currentRadical:s,foundKanji:l,allKanji:n,isGameClear:a,onReplay:c,onReturn:i}=e,[d,o]=(0,h.lW)();return(0,r.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8",children:[(a||t>=15)&&(0,r.jsx)(u.A,{width:d,height:o,numberOfPieces:1e3,recycle:!1}),(0,r.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"ゲーム終了！"}),(0,r.jsxs)("div",{className:"text-6xl font-bold text-blue-600 mb-4",children:[t,"点"]}),(0,r.jsx)("p",{className:"text-2xl text-gray-700 mb-2",children:t>=20?"漢字マスター！":t>=15?"素晴らしい！":t>=10?"よくできました！":t>=5?"がんばりました！":"また挑戦してね！"}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["部首「",s,"」で ",l.length," / ",n.length," 個の漢字を発見しました！"]}),(0,r.jsx)(m,{allKanji:n,foundKanji:l}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)("button",{onClick:c,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"もう一度プレイ"}),(0,r.jsx)("button",{onClick:i,className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"部首選択へ戻る"})]})]})}function b(e){let{value:t,onChange:s,onSubmit:n,isHintVisible:a,hints:c,onToggleHint:i}=e,d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var e;null==(e=d.current)||e.focus()},[]),(0,r.jsxs)("div",{className:"text-center ",children:[(0,r.jsx)("input",{ref:d,type:"text",value:t,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"===e.key&&n()},placeholder:"読み方をひらがなで入力",className:"text-sm p-2 border-2 border-gray-300 rounded-lg w-50 text-center focus:border-blue-500 focus:outline-none"}),(0,r.jsxs)("div",{className:"mt-4 mb-4 flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,r.jsx)("button",{onClick:n,disabled:!t.trim(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white py-2 px-6 rounded-lg transition-colors w-full sm:w-auto",children:"答える"}),(0,r.jsx)("button",{onClick:i,className:"bg-orange-500 hover:bg-orange-600 text-white  py-2 px-3 rounded-lg transition-colors w-full sm:w-auto",children:a?"ヒントを隠す":"ヒントを見る"})]}),(0,r.jsx)("div",{children:a&&c.length>0&&(0,r.jsxs)("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 p-4 rounded-lg mb-4 text-left w-full",children:[(0,r.jsx)("p",{className:"font-semibold mb-2",children:"ヒント（意味のみ）:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:c.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]})})]})}var j=s(7924),f=s(8564);function p(e){let{visible:t,kanji:s,isCorrect:l}=e;return t?l?s?(0,r.jsxs)("div",{className:"   fixed top-1/2 left-1/2   transform -translate-x-1/2 -translate-y-1/2   bg-green-100 border-2 border-green-300 rounded-lg   p-6 max-w-xs w-full   text-center   shadow-lg   z-50   ",role:"alert","aria-live":"assertive",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(f.A,{className:"text-yellow-500",size:20}),(0,r.jsx)("span",{className:"font-bold text-green-700 text-xl",children:"正解！"}),(0,r.jsx)("span",{className:"font-bold text-green-700 text-xl",children:"+10秒"}),(0,r.jsx)(f.A,{className:"text-yellow-500",size:20})]}),(0,r.jsx)("div",{className:"text-5xl font-bold text-green-800 mb-4",children:s.char}),(0,r.jsxs)("p",{className:"text-green-700 font-semibold mb-1",children:["読み: ",s.readings.join("、")]}),(0,r.jsx)("p",{className:"text-green-600 text-lg",children:(0,o.b)(s.kanken)})]}):null:(0,r.jsx)("div",{className:"   fixed top-1/2 left-1/2   transform -translate-x-1/2 -translate-y-1/2   bg-red-100 border-2 border-red-400 rounded-lg   p-6 max-w-xs w-full   text-center   shadow-lg   z-50   animate-pulse   ",role:"alert","aria-live":"assertive",children:(0,r.jsx)("p",{className:"text-red-700 font-bold text-xl",children:"不正解！"})}):null}let N=e=>e>=5&&e<=10?1:e>=3&&e<=4?2:e>=2&&e<=2.5?3:1.5===e?5:1===e?8:1,v=e=>e.replace(/[ァ-ヶ]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),w=e=>e.replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)),y=e=>{let t=w(e||"").match(/\d+/);return t?parseInt(t[0],10):7};function k(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)({}),[x,m]=(0,l.useState)({}),[u,h]=(0,l.useState)(null),[f,w]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1),[S,A]=(0,l.useState)(""),[E,T]=(0,l.useState)([]),[z,O]=(0,l.useState)(null),[R,K]=(0,l.useState)(!1),[_,P]=(0,l.useState)(0),[L,F]=(0,l.useState)(60),[H,G]=(0,l.useState)([]),[I,J]=(0,l.useState)(!1),[M,U]=(0,l.useState)(!1),[V,W]=(0,l.useState)(!1),[X,$]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e={},t={};j.X.forEach(s=>{let{radical:r,reading:l,kanji:n}=s;t[r]=l,e[r]=n.map(e=>{var t;return{char:e.char,readings:[...e.onyomi||[],...e.kunyomi||[]].map(e=>v(e.replace(/（.*?）/g,"")).toLowerCase()),meaning:((null==(t=e.meaning)?void 0:t[0])||"").replace(/。$/,""),grade:y(e.grade||""),kanken:e.kanken}})}),s(e),m(t)},[]),(0,l.useEffect)(()=>{if(f&&!k&&!V&&L>0){let e=setTimeout(()=>F(e=>e-1),1e3);return()=>clearTimeout(e)}!f||k||V||0!==L||B()},[f,k,L,V]),(0,l.useEffect)(()=>{var e;if(!u||k)return;let s=(null==(e=t[u])?void 0:e.length)||0;E.length===s&&s>0&&(U(!0),B())},[E,u,t,k]);let q=e=>{h(e),w(!0),C(!1),A(""),T([]),O(null),K(!1),P(0),F(60),J(!1),G([]),U(!1)},B=()=>{w(!1),C(!0)},D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u&&G(t[u].filter(t=>!E.some(e=>e.char===t.char)&&t.char!==e).sort((e,t)=>t.kanken-e.kanken).slice(0,2).map(e=>"".concat(e.meaning,"　（").concat(e.kanken?(0,o.d)(e.kanken):"不明","）")))},Q=Object.entries(t).map(e=>{let[t,s]=e;return{radical:t,count:s.length,reading:x[t]||"？"}}).sort((e,t)=>t.count-e.count),Y=u?t[u]:[];return(0,r.jsx)("div",{className:"max-w-full sm:max-w-4xl mx-auto px-4 py-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen overflow-x-hidden",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsxs)("p",{className:"text-3xl font-bold text-gray-800",children:["「",u,"」（",x[u]||"?","）の漢字"]})}),!f&&!k&&(0,r.jsx)(c,{onStart:()=>w(!0)}),f&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)(i.A,{timeLeft:L,isTimeUnlimited:V,onToggleTimeMode:()=>W(e=>!e),score:_,onReset:B}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block bg-blue-100 rounded-lg p-8 mb-2",children:(0,r.jsx)("span",{className:"text-4xl sm:text-6xl md:text-8xl font-bold text-blue-800",children:u})}),(0,r.jsxs)("p",{className:"text-gray-700 text-base",children:["全 ",Y.length," 個の漢字があります"]})]}),(0,r.jsx)(b,{value:S,onChange:A,onSubmit:()=>{if(!u||!S.trim())return;let e=S.trim().toLowerCase(),s=(t[u]||[]).find(t=>!E.some(e=>e.char===t.char)&&t.readings.includes(e));if(s){let e=N(s.kanken);F(e=>e+15),P(t=>t+e),T(e=>[...e,s]),O(s),$(!0),K(!0),I&&D(s.char),setTimeout(()=>{K(!1),O(null)},2e3)}else $(!1),K(!0),setTimeout(()=>{K(!1)},700);A("")},isHintVisible:I,hints:H,onToggleHint:()=>{u&&(I||D(),J(e=>!e))}}),(0,r.jsx)(p,{visible:R,kanji:z,isCorrect:X}),(0,r.jsx)(d,{foundKanji:E,total:Y.length})]})}),k&&(0,r.jsx)(g,{score:_,currentRadical:u,foundKanji:E,allKanji:Y,isGameClear:M,onReplay:()=>q(u),onReturn:()=>{h(null),w(!1),C(!1),A(""),T([]),O(null),K(!1),P(0),W(!1),F(60),J(!1),G([]),U(!1)}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"rounded-md mb-2 bg-gray-200 px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:"← タイトルに戻る"}),(0,r.jsx)("h1",{className:"text-center text-4xl font-bold mb-6",children:"部首を選択"}),(0,r.jsx)(a.A,{radicals:Q,onSelect:q})]})})}},4909:(e,t,s)=>{Promise.resolve().then(s.bind(s,690))},5678:(e,t,s)=>{"use strict";s.d(t,{b:()=>r,d:()=>l});let r=e=>{switch(e){case 10:return"小学1年生(10級)";case 9:return"小学2年生(9級)";case 8:return"小学3年生(8級)";case 7:return"小学4年生(7級)";case 6:return"小学5年生(6級)";case 5:return"小学6年生(5級)";case 4:return"中学生レベル(4級)";case 3:return"中学生レベル(3級)";case 2.5:return"高校生レベル（準2級）";case 2:return"高校生レベル（2級）";case 1.5:return"大学・社会人（準1級）";case 1:return"大学・社会人（1級）";default:return"不明"}},l=e=>{switch(e){case 10:return"小学1年生";case 9:return"小学2年生";case 8:return"小学3年生";case 7:return"小学4年生";case 6:return"小学5年生";case 5:return"小学6年生";case 4:case 3:return"中学生レベル";case 2.5:case 2:return"高校生レベル";case 1.5:case 1:return"大学・社会人";default:return"不明"}}},9250:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(5155);s(2115);var l=s(4186),n=s(8186),a=s(3904);function c(e){let{timeLeft:t,isTimeUnlimited:s,score:c,onReset:i,onToggleTimeMode:d}=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center flex-wrap sm:flex-nowrap gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 min-w-[140px] whitespace-nowrap",children:[(0,r.jsx)(l.A,{className:"text-red-500",size:24}),(0,r.jsxs)("span",{className:"md:text-2xl font-bold text-red-500",children:[t,"秒"]}),(0,r.jsx)("button",{onClick:d,className:"bg-yellow-500 hover:bg-yellow-600 text-white text-xs sm:text-sm font-bold py-1 px-2 rounded-lg whitespace-nowrap",children:s?"START":"STOP"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 min-w-[60px] whitespace-nowrap",children:[(0,r.jsx)(n.A,{className:"text-yellow-500",size:24}),(0,r.jsxs)("span",{className:"md:text-2xl font-bold text-yellow-600",children:[c,"点"]})]}),(0,r.jsxs)("button",{onClick:i,className:"flex items-center space-x-1 bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded-lg transition-colors whitespace-nowrap mt-2 sm:mt-0",children:[(0,r.jsx)(a.A,{size:16}),(0,r.jsx)("span",{className:"text-sm",children:"答え"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[171,924,441,684,358],()=>t(4909)),_N_E=e.O()}]);