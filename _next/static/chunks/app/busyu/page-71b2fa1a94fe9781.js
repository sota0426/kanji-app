(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{4909:(e,t,s)=>{Promise.resolve().then(s.bind(s,7944))},7944:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var l=s(5155),r=s(2115);function a(e){let{radicals:t,onSelect:s}=e;return(0,l.jsx)("div",{className:"grid md:grid-cols-3 ms:grid-cols-2 gap-4",children:t.filter(e=>{let{count:t}=e;return t>3}).map(e=>{let{radical:t,count:r,reading:a}=e;return(0,l.jsx)("button",{onClick:()=>s(t),className:"bg-white hover:bg-blue-100 rounded-lg p-4 shadow text-center transition-colors",children:(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("span",{className:"ml-4 text-4xl font-bold mb-1",children:t}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["（漢字数：",r,"）"]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsxs)("span",{className:"ml-2text-gray-700 mb-1",children:["部首名: ",a]})})]})},t)})})}function n(e){let{onStart:t}=e;return(0,l.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8 mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ゲームの説明"}),(0,l.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-2 mb-6 list-disc list-inside",children:[(0,l.jsx)("li",{children:"ひらがなで読み方を入力"}),(0,l.jsx)("li",{children:"制限時間は 60 秒"}),(0,l.jsx)("li",{children:"同じ漢字は 1 度だけカウント"}),(0,l.jsx)("li",{children:"高学年の漢字は高得点"})]}),(0,l.jsx)("button",{onClick:t,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"ゲームスタート！"})]})}var c=s(4186),i=s(8186),d=s(3904);function o(e){let{timeLeft:t,isTimeUnlimited:s,score:r,onReset:a,onToggleTimeMode:n}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center flex-wrap sm:flex-nowrap gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 min-w-[140px] whitespace-nowrap",children:[(0,l.jsx)(c.A,{className:"text-red-500",size:24}),(0,l.jsxs)("span",{className:"md:text-2xl font-bold text-red-500",children:[t,"秒"]}),(0,l.jsx)("button",{onClick:n,className:"bg-yellow-500 hover:bg-yellow-600 text-white text-xs sm:text-sm font-bold py-1 px-2 rounded-lg whitespace-nowrap",children:s?"START":"STOP"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 min-w-[60px] whitespace-nowrap",children:[(0,l.jsx)(i.A,{className:"text-yellow-500",size:24}),(0,l.jsxs)("span",{className:"md:text-2xl font-bold text-yellow-600",children:[r,"点"]})]}),(0,l.jsxs)("button",{onClick:a,className:"flex items-center space-x-1 bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded-lg transition-colors whitespace-nowrap mt-2 sm:mt-0",children:[(0,l.jsx)(d.A,{size:16}),(0,l.jsx)("span",{className:"text-sm",children:"答え"})]})]})}var x=s(8564);function m(e){let{visible:t,kanji:s,calcPoint:r}=e;return t&&s?(0,l.jsxs)("div",{className:"text-center bg-green-100 rounded-lg p-6 mb-6 border-2 border-green-300",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,l.jsx)(x.A,{className:"text-yellow-500",size:24}),(0,l.jsx)("span",{className:"text-2xl font-bold text-green-700",children:"正解！"}),(0,l.jsx)(x.A,{className:"text-yellow-500",size:24})]}),(0,l.jsx)("div",{className:"text-6xl font-bold text-green-800 mb-2",children:s.char}),(0,l.jsxs)("p",{className:"text-green-700 font-semibold",children:["読み: ",s.readings.join("、")]}),(0,l.jsxs)("p",{className:"text-green-600",children:["+",r(s.grade),"点"]})]}):null}function u(e){let{foundKanji:t,total:s}=e;return 0===t.length?null:(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-semibold mb-3",children:["見つけた漢字 (",t.length," / ",s,")"]}),(0,l.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:t.map(e=>(0,l.jsxs)("div",{className:"text-center bg-white rounded-lg p-3 shadow",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:e.char}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[0]})]},e.char))})]})}function h(e){let{allKanji:t,foundKanji:s}=e,r=new Set(s.map(e=>e.char)),a={};t.forEach(e=>{let t=e.grade;a[t]||(a[t]=[]),a[t].push(e)});let n=e=>{switch(e){case 1:return"小学1年";case 2:return"小学2年";case 3:return"小学3年";case 4:return"小学4年";case 5:return"小学5年";case 6:return"小学6年";case 7:return"中学生以上";default:return"その他"}};return(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"全漢字一覧（学年別）"}),Object.entries(a).sort((e,t)=>Number(e[0])-Number(t[0])).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 border-b border-gray-300 pb-1",children:n(Number(t))}),(0,l.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:s.map(e=>{let t=r.has(e.char);return(0,l.jsxs)("div",{className:"text-center rounded-lg p-3 shadow transition-all ".concat(t?"bg-white text-blue-800 border border-blue-200":"bg-red-100 text-red-600 border border-red-300"),children:[(0,l.jsx)("div",{className:"text-3xl font-bold mb-1",children:e.char}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[1]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.readings[0].replace(/[\u3041-\u3096]/g,e=>String.fromCharCode(e.charCodeAt(0)+96))})]},e.char)})})]},t)})]})}var g=s(7948),b=s(5718);function p(e){let{score:t,currentRadical:s,foundKanji:r,allKanji:a,isGameClear:n,onReplay:c,onReturn:i}=e,[d,o]=(0,b.lW)();return(0,l.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8",children:[(n||t>=15)&&(0,l.jsx)(g.A,{width:d,height:o,numberOfPieces:1e3,recycle:!1}),(0,l.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"ゲーム終了！"}),(0,l.jsxs)("div",{className:"text-6xl font-bold text-blue-600 mb-4",children:[t,"点"]}),(0,l.jsx)("p",{className:"text-2xl text-gray-700 mb-2",children:t>=20?"漢字マスター！":t>=15?"素晴らしい！":t>=10?"よくできました！":t>=5?"がんばりました！":"また挑戦してね！"}),(0,l.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["部首「",s,"」で ",r.length," / ",a.length," 個の漢字を発見しました！"]}),(0,l.jsx)(h,{allKanji:a,foundKanji:r}),(0,l.jsxs)("div",{className:"space-x-4",children:[(0,l.jsx)("button",{onClick:c,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"もう一度プレイ"}),(0,l.jsx)("button",{onClick:i,className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"部首選択へ戻る"})]})]})}function j(e){let{value:t,onChange:s,onSubmit:a,isHintVisible:n,hints:c,onToggleHint:i}=e,d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e;null==(e=d.current)||e.focus()},[]),(0,l.jsxs)("div",{className:"text-center ",children:[(0,l.jsx)("input",{ref:d,type:"text",value:t,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"===e.key&&a()},placeholder:"読み方をひらがなで入力",className:"text-sm p-2 border-2 border-gray-300 rounded-lg w-50 text-center focus:border-blue-500 focus:outline-none"}),(0,l.jsxs)("div",{className:"mt-4 mb-4 flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,l.jsx)("button",{onClick:a,disabled:!t.trim(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors w-full sm:w-auto",children:"答える"}),(0,l.jsx)("button",{onClick:i,className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-6 rounded-lg mb-2 w-full sm:w-auto",children:n?"ヒントを隠す":"ヒントを見る"})]}),(0,l.jsx)("div",{children:n&&c.length>0&&(0,l.jsxs)("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 p-4 rounded-lg mb-4 text-left w-full",children:[(0,l.jsx)("p",{className:"font-semibold mb-2",children:"ヒント（意味のみ）:"}),(0,l.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:c.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]})})]})}let f=e=>e<=2?1:e<=4?2:3;function N(){let[e,t]=(0,r.useState)({}),[s,c]=(0,r.useState)({}),[i,d]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[N,v]=(0,r.useState)(""),[w,y]=(0,r.useState)([]),[S,C]=(0,r.useState)(null),[k,T]=(0,r.useState)(!1),[E,A]=(0,r.useState)(0),[O,K]=(0,r.useState)(60),[P,R]=(0,r.useState)([]),[_,z]=(0,r.useState)(!1),[H,L]=(0,r.useState)(!1),[G,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e="".concat("","/busyu.json");fetch(e).then(e=>{if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{let s={},l={};e.forEach(e=>{l[e.radical]=e.reading,s[e.radical]=e.kanji.map(e=>{var t;let s=e=>e.replace(/[ァ-ヶ]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),l=[...e["音読み"]||[],...e["訓読み"]||[]].map(e=>s(e.replace(/（.*?）/g,"")).toLowerCase()),r=(e["学年"]||"").replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).match(/\d+/),a=r?parseInt(r[0],10):7;return{char:e.char,readings:l,meaning:((null==(t=e["意味"])?void 0:t[0])||"").replace(/。$/,""),grade:a}})}),t(s),c(l)}).catch(t=>alert("busyu.json の読み込みに失敗しました: ".concat(t.message,"\nJSONパス: ").concat(e)))},[]),(0,r.useEffect)(()=>{if(x&&!g&&!G&&O>0){let e=setTimeout(()=>K(e=>e-1),1e3);return()=>clearTimeout(e)}!x||g||G||0!==O||M()},[x,g,O,G]),(0,r.useEffect)(()=>{var t;if(!i||g)return;let s=(null==(t=e[i])?void 0:t.length)||0,l=w.length;s>0&&l===s&&(L(!0),M())},[w,i,e,g]);let J=e=>{d(e),h(!0),b(!1),v(""),y([]),C(null),T(!1),A(0),K(120),z(!1),R([])},M=()=>{h(!1),b(!0)},U=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i&&R([...e[i].filter(e=>!w.some(t=>t.char===e.char)&&e.char!==t)].sort((e,t)=>e.grade-t.grade).slice(0,2).map(e=>"".concat(e.meaning,"（").concat(7===e.grade?"中学生漢字":e.grade+"年生","）")))},V=Object.entries(e).map(e=>{let[t,l]=e;return{radical:t,count:l.length,reading:s[t]||"？"}}).sort((e,t)=>t.count-e.count),W=i?e[i]:[];return i?(0,l.jsxs)("div",{className:"max-w-full sm:max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen overflow-x-hidden",children:[(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:["「",i,"」（",s[i]||"?","）の漢字"]})}),!x&&!g&&(0,l.jsx)(n,{onStart:()=>h(!0)}),x&&(0,l.jsx)("div",{className:"space-y-4 sm:space-y-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 flex flex-col gap-4",children:[(0,l.jsx)(o,{timeLeft:O,isTimeUnlimited:G,onToggleTimeMode:()=>I(e=>!e),score:E,onReset:M}),(0,l.jsxs)("div",{className:"text-center ",children:[(0,l.jsx)("div",{className:"inline-block bg-blue-100 rounded-lg p-6 sm:p-8 mb-2",children:(0,l.jsx)("span",{className:"text-4xl sm:text-8xl lg:text-9xl font-bold text-blue-800",children:i})}),(0,l.jsxs)("p",{className:"text-gray-700 text-sm sm:text-base",children:["全 ",W.length," 個の漢字があります"]})]}),(0,l.jsx)(j,{value:N,onChange:v,onSubmit:()=>{if(!i||!N.trim())return;let t=N.trim().toLowerCase(),s=(e[i]||[]).find(e=>!w.some(t=>t.char===e.char)&&e.readings.includes(t));if(s){let e=f(s.grade);A(t=>t+e),y(e=>[...e,s]),C(s),T(!0),_&&U(s.char),setTimeout(()=>{T(!1),C(null)},1800)}v("")},isHintVisible:_,hints:P,onToggleHint:()=>{i&&(_||U(),z(!_))}}),(0,l.jsx)(m,{visible:k,kanji:S,calcPoint:f}),(0,l.jsx)(u,{foundKanji:w,total:W.length})]})}),g&&(0,l.jsx)(p,{score:E,currentRadical:i,foundKanji:w,allKanji:W,isGameClear:H,onReplay:()=>J(i),onReturn:()=>{d(null),h(!1),b(!1),v(""),y([]),C(null),T(!1),A(0),K(120),z(!1),R([])}})]}):(0,l.jsxs)("div",{className:"max-w-full sm:max-w-4xl mx-auto px-4 sm:px-6 py-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen overflow-x-hidden",children:[(0,l.jsx)("h1",{className:"text-center text-3xl sm:text-4xl font-bold mb-6",children:"部首を選択"}),(0,l.jsx)(a,{radicals:V,onSelect:J})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[497,441,684,358],()=>t(4909)),_N_E=e.O()}]);