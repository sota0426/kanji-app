(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{3746:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var s=r(5155),l=r(2115),n=r(5695);function a(e){let{radicals:t,onSelect:r}=e;return(0,l.useEffect)(()=>{console.log(JSON.stringify(t,null,2))},[t]),(0,s.jsx)("div",{className:"grid gird-cols-1 md:grid-cols-2  gap-4",children:t.filter(e=>{let{count:t}=e;return t>3}).map(e=>{let{radical:t,count:l,reading:n}=e;return(0,s.jsx)("button",{onClick:()=>r(t),className:"bg-white hover:bg-blue-100 rounded-lg p-4 shadow text-center transition-colors",children:(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("span",{className:"ml-4 text-4xl font-bold mb-1",children:t}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["（漢字数：",l,"）"]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("span",{className:"ml-2text-gray-700 mb-1",children:["部首名: ",n]})})]})},t)})})}function i(e){let{onStart:t}=e;return(0,s.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8 mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ゲームの説明"}),(0,s.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-2 mb-6 list-disc list-inside",children:[(0,s.jsx)("li",{children:"ひらがなで読み方を入力"}),(0,s.jsx)("li",{children:"制限時間は 60 秒"}),(0,s.jsx)("li",{children:"同じ漢字は 1 度だけカウント"}),(0,s.jsx)("li",{children:"高学年の漢字は高得点"})]}),(0,s.jsx)("button",{onClick:t,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"ゲームスタート！"})]})}let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=d(e);return t.charAt(0).toUpperCase()+t.slice(1)},u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},x=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,l.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:c,iconNode:d,...o}=e;return(0,l.createElement)("svg",{ref:t,...m,width:s,height:s,stroke:r,strokeWidth:a?24*Number(n)/Number(s):n,className:u("lucide",i),...!c&&!x(o)&&{"aria-hidden":"true"},...o},[...d.map(e=>{let[t,r]=e;return(0,l.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),g=(e,t)=>{let r=(0,l.forwardRef)((r,s)=>{let{className:n,...a}=r;return(0,l.createElement)(h,{ref:s,iconNode:t,className:u("lucide-".concat(c(o(e))),"lucide-".concat(e),n),...a})});return r.displayName=o(e),r},b=g("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),f=g("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),p=g("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function j(e){let{timeLeft:t,isTimeUnlimited:r,score:l,onReset:n,onToggleTimeMode:a}=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center flex-wrap sm:flex-nowrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 min-w-[140px] whitespace-nowrap",children:[(0,s.jsx)(b,{className:"text-red-500",size:24}),(0,s.jsxs)("span",{className:"md:text-2xl font-bold text-red-500",children:[t,"秒"]}),(0,s.jsx)("button",{onClick:a,className:"bg-yellow-500 hover:bg-yellow-600 text-white text-xs sm:text-sm font-bold py-1 px-2 rounded-lg whitespace-nowrap",children:r?"START":"STOP"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 min-w-[60px] whitespace-nowrap",children:[(0,s.jsx)(f,{className:"text-yellow-500",size:24}),(0,s.jsxs)("span",{className:"md:text-2xl font-bold text-yellow-600",children:[l,"点"]})]}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center space-x-1 bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded-lg transition-colors whitespace-nowrap mt-2 sm:mt-0",children:[(0,s.jsx)(p,{size:16}),(0,s.jsx)("span",{className:"text-sm",children:"答え"})]})]})}function v(e){let{foundKanji:t,total:r}=e;return 0===t.length?null:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-3",children:["見つけた漢字 (",t.length," / ",r,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:t.map(e=>(0,s.jsxs)("div",{className:"text-center bg-white rounded-lg p-3 shadow",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:e.char}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[0]})]},e.char))})]})}var w=r(5678);function N(e){return e.replace(/[\u3041-\u3096]/g,e=>String.fromCharCode(e.charCodeAt(0)+96))}function y(e){let{allKanji:t,foundKanji:r}=e,l=new Set(r.map(e=>e.char)),n={};return t.forEach(e=>{let t=e.kanken;n[t]||(n[t]=[]),n[t].push(e)}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"全漢字一覧（学年別）"}),Object.entries(n).sort((e,t)=>Number(t[0])-Number(e[0])).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 border-b border-gray-300 pb-1",children:(0,w.b)(Number(t))}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-4",children:r.map(e=>{let t=l.has(e.char);return(0,s.jsxs)("div",{className:"relative group text-center rounded-lg p-3 shadow transition-all cursor-pointer ".concat(t?"bg-white text-blue-800 border border-blue-200":"bg-red-100 text-red-600 border border-red-300"),children:[(0,s.jsx)("div",{className:"text-3xl font-bold mb-1",children:e.char}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[1]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:N(e.readings[0])}),(0,s.jsxs)("div",{className:"absolute z-10 hidden group-hover:block bg-white border text-black border-gray-300 rounded-lg p-3 text-sm    text-left shadow-lg w-60 top-full mt-2 left-1/2 transform -translate-x-1/2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"漢字:"})," ",e.char]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"音読み:"})," ",N(e.readings[0])]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"訓読み:"})," ",e.readings[1]]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"意味:"})," ",e.meaning]})]})]},e.char)})})]},t)})]})}var k=r(7948);let C=e=>{let t=l.useRef(e);return l.useEffect(()=>{t.current=e}),t},S=(e,t=100,r=!1)=>{let s=C(e),n=l.useRef(),a=[t,r,s];function i(){n.current&&clearTimeout(n.current),n.current=void 0}function c(){n.current=void 0}return l.useEffect(()=>i,a),l.useCallback(function(){let e=arguments,{current:l}=n;if(void 0===l&&r)return n.current=setTimeout(c,t),s.current.apply(null,e);l&&clearTimeout(l),n.current=setTimeout(()=>{n.current=void 0,s.current.apply(null,e)},t)},a)},E=(e,t,r)=>{let s=l.useState(e);return[s[0],S(s[1],t,r)]},T=function(e,t,r,s){let n=l.useRef(r),a=l.useRef(s);l.useEffect(()=>{n.current=r,a.current=s}),l.useEffect(()=>{let r=e&&"current"in e?e.current:e;if(!r)return;let s=0;function l(...e){s||n.current.apply(this,e)}r.addEventListener(t,l);let i=a.current;return()=>{s=1,r.removeEventListener(t,l),i&&i()}},[e,t])},z={},A="undefined"==typeof window?null:window,L=A&&void 0!==A.visualViewport?A.visualViewport:null,M=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],R=function(e){void 0===e&&(e=z);let{wait:t,leading:r,initialWidth:s=0,initialHeight:l=0}=e,[n,a]=E("undefined"==typeof document?[s,l]:M,t,r),i=()=>a(M);return T(A,"resize",i),T(L,"resize",i),T(A,"orientationchange",i),n};function H(e){let{score:t,currentRadical:r,foundKanji:l,allKanji:n,isGameClear:a,onReplay:i,onReturn:c}=e,[d,o]=R();return(0,s.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8",children:[(a||t>=15)&&(0,s.jsx)(k.A,{width:d,height:o,numberOfPieces:1e3,recycle:!1}),(0,s.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"ゲーム終了！"}),(0,s.jsxs)("div",{className:"text-6xl font-bold text-blue-600 mb-4",children:[t,"点"]}),(0,s.jsx)("p",{className:"text-2xl text-gray-700 mb-2",children:t>=20?"漢字マスター！":t>=15?"素晴らしい！":t>=10?"よくできました！":t>=5?"がんばりました！":"また挑戦してね！"}),(0,s.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["部首「",r,"」で ",l.length," / ",n.length," 個の漢字を発見しました！"]}),(0,s.jsx)(y,{allKanji:n,foundKanji:l}),(0,s.jsxs)("div",{className:"space-x-4",children:[(0,s.jsx)("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"もう一度プレイ"}),(0,s.jsx)("button",{onClick:c,className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"部首選択へ戻る"})]})]})}function O(e){let{value:t,onChange:r,onSubmit:n,isHintVisible:a,hints:i,onToggleHint:c}=e,d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{var e;null==(e=d.current)||e.focus()},[]),(0,s.jsxs)("div",{className:"text-center ",children:[(0,s.jsx)("input",{ref:d,type:"text",value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&n()},placeholder:"読み方をひらがなで入力",className:"text-sm p-2 border-2 border-gray-300 rounded-lg w-50 text-center focus:border-blue-500 focus:outline-none"}),(0,s.jsxs)("div",{className:"mt-4 mb-4 flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,s.jsx)("button",{onClick:n,disabled:!t.trim(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white py-2 px-6 rounded-lg transition-colors w-full sm:w-auto",children:"答える"}),(0,s.jsx)("button",{onClick:c,className:"bg-orange-500 hover:bg-orange-600 text-white  py-2 px-3 rounded-lg transition-colors w-full sm:w-auto",children:a?"ヒントを隠す":"ヒントを見る"})]}),(0,s.jsx)("div",{children:a&&i.length>0&&(0,s.jsxs)("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 p-4 rounded-lg mb-4 text-left w-full",children:[(0,s.jsx)("p",{className:"font-semibold mb-2",children:"ヒント（意味のみ）:"}),(0,s.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:i.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]})})]})}var _=r(7924);let K=g("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function P(e){let{visible:t,kanji:r,isCorrect:l}=e;return t?l?r?(0,s.jsxs)("div",{className:"   fixed top-1/2 left-1/2   transform -translate-x-1/2 -translate-y-1/2   bg-green-100 border-2 border-green-300 rounded-lg   p-6 max-w-xs w-full   text-center   shadow-lg   z-50   ",role:"alert","aria-live":"assertive",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(K,{className:"text-yellow-500",size:20}),(0,s.jsx)("span",{className:"font-bold text-green-700 text-xl",children:"正解！"}),(0,s.jsx)("span",{className:"font-bold text-green-700 text-xl",children:"+10秒"}),(0,s.jsx)(K,{className:"text-yellow-500",size:20})]}),(0,s.jsx)("div",{className:"text-5xl font-bold text-green-800 mb-4",children:r.char}),(0,s.jsxs)("p",{className:"text-green-700 font-semibold mb-1",children:["読み: ",r.readings.join("、")]}),(0,s.jsx)("p",{className:"text-green-600 text-lg",children:(0,w.b)(r.kanken)})]}):null:(0,s.jsx)("div",{className:"   fixed top-1/2 left-1/2   transform -translate-x-1/2 -translate-y-1/2   bg-red-100 border-2 border-red-400 rounded-lg   p-6 max-w-xs w-full   text-center   shadow-lg   z-50   animate-pulse   ",role:"alert","aria-live":"assertive",children:(0,s.jsx)("p",{className:"text-red-700 font-bold text-xl",children:"不正解！"})}):null}let V=e=>e>=5&&e<=10?1:e>=3&&e<=4?2:e>=2&&e<=2.5?3:1.5===e?5:1===e?8:1,W=e=>e.replace(/[ァ-ヶ]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),U=e=>e.replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)),$=e=>{let t=U(e||"").match(/\d+/);return t?parseInt(t[0],10):7};function q(){let e=(0,n.useRouter)(),[t,r]=(0,l.useState)({}),[c,d]=(0,l.useState)({}),[o,u]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(""),[p,N]=(0,l.useState)([]),[y,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(!1),[E,T]=(0,l.useState)(0),[z,A]=(0,l.useState)(60),[L,M]=(0,l.useState)([]),[R,K]=(0,l.useState)(!1),[U,q]=(0,l.useState)(!1),[F,Z]=(0,l.useState)(!1),[B,G]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e={},t={};_.X.forEach(r=>{let{radical:s,reading:l,kanji:n}=r;t[s]=l,e[s]=n.map(e=>{var t;return{char:e.char,readings:[...e.onyomi||[],...e.kunyomi||[]].map(e=>W(e.replace(/（.*?）/g,"")).toLowerCase()),meaning:((null==(t=e.meaning)?void 0:t[0])||"").replace(/。$/,""),grade:$(e.grade||""),kanken:e.kanken}})}),r(e),d(t)},[]),(0,l.useEffect)(()=>{if(x&&!h&&!F&&z>0){let e=setTimeout(()=>A(e=>e-1),1e3);return()=>clearTimeout(e)}!x||h||F||0!==z||J()},[x,h,z,F]),(0,l.useEffect)(()=>{var e;if(!o||h)return;let r=(null==(e=t[o])?void 0:e.length)||0;p.length===r&&r>0&&(q(!0),J())},[p,o,t,h]);let I=e=>{u(e),m(!0),g(!1),f(""),N([]),k(null),S(!1),T(0),A(60),K(!1),M([]),q(!1)},J=()=>{m(!1),g(!0)},X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o&&M(t[o].filter(t=>!p.some(e=>e.char===t.char)&&t.char!==e).sort((e,t)=>t.kanken-e.kanken).slice(0,2).map(e=>"".concat(e.meaning,"　（").concat(e.kanken?(0,w.d)(e.kanken):"不明","）")))},D=Object.entries(t).map(e=>{let[t,r]=e;return{radical:t,count:r.length,reading:c[t]||"？"}}).sort((e,t)=>t.count-e.count),Q=o?t[o]:[];return(0,s.jsx)("div",{className:"max-w-full sm:max-w-4xl mx-auto px-4 py-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen overflow-x-hidden",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsxs)("p",{className:"text-3xl font-bold text-gray-800",children:["「",o,"」（",c[o]||"?","）の漢字"]})}),!x&&!h&&(0,s.jsx)(i,{onStart:()=>m(!0)}),x&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)(j,{timeLeft:z,isTimeUnlimited:F,onToggleTimeMode:()=>Z(e=>!e),score:E,onReset:J}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block bg-blue-100 rounded-lg p-8 mb-2",children:(0,s.jsx)("span",{className:"text-4xl sm:text-6xl md:text-8xl font-bold text-blue-800",children:o})}),(0,s.jsxs)("p",{className:"text-gray-700 text-base",children:["全 ",Q.length," 個の漢字があります"]})]}),(0,s.jsx)(O,{value:b,onChange:f,onSubmit:()=>{if(!o||!b.trim())return;let e=b.trim().toLowerCase(),r=(t[o]||[]).find(t=>!p.some(e=>e.char===t.char)&&t.readings.includes(e));if(r){let e=V(r.kanken);A(e=>e+15),T(t=>t+e),N(e=>[...e,r]),k(r),G(!0),S(!0),R&&X(r.char),setTimeout(()=>{S(!1),k(null)},2e3)}else G(!1),S(!0),setTimeout(()=>{S(!1)},700);f("")},isHintVisible:R,hints:L,onToggleHint:()=>{o&&(R||X(),K(e=>!e))}}),(0,s.jsx)(P,{visible:C,kanji:y,isCorrect:B}),(0,s.jsx)(v,{foundKanji:p,total:Q.length})]})}),h&&(0,s.jsx)(H,{score:E,currentRadical:o,foundKanji:p,allKanji:Q,isGameClear:U,onReplay:()=>I(o),onReturn:()=>{u(null),m(!1),g(!1),f(""),N([]),k(null),S(!1),T(0),Z(!1),A(60),K(!1),M([]),q(!1)}})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>e.push("/"),className:"rounded-md mb-2 bg-gray-200 px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:"← タイトルに戻る"}),(0,s.jsx)("h1",{className:"text-center text-4xl font-bold mb-6",children:"部首を選択"}),(0,s.jsx)(a,{radicals:D,onSelect:I})]})})}},5678:(e,t,r)=>{"use strict";r.d(t,{b:()=>s,d:()=>l});let s=e=>{switch(e){case 10:return"小学1年生(10級)";case 9:return"小学2年生(9級)";case 8:return"小学3年生(8級)";case 7:return"小学4年生(7級)";case 6:return"小学5年生(6級)";case 5:return"小学6年生(5級)";case 4:return"中学生レベル(4級)";case 3:return"中学生レベル(3級)";case 2.5:return"高校生レベル（準2級）";case 2:return"高校生レベル（2級）";case 1.5:return"大学・社会人（準1級）";case 1:return"大学・社会人（1級）";default:return"不明"}},l=e=>{switch(e){case 10:return"小学1年生";case 9:return"小学2年生";case 8:return"小学3年生";case 7:return"小学4年生";case 6:return"小学5年生";case 5:return"小学6年生";case 4:case 3:return"中学生レベル";case 2.5:case 2:return"高校生レベル";case 1.5:case 1:return"大学・社会人";default:return"不明"}}},9936:(e,t,r)=>{Promise.resolve().then(r.bind(r,3746))}},e=>{var t=t=>e(e.s=t);e.O(0,[948,674,441,684,358],()=>t(9936)),_N_E=e.O()}]);