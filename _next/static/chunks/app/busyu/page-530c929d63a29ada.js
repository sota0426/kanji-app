(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{4909:(e,t,s)=>{Promise.resolve().then(s.bind(s,7944))},7944:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var l=s(5155),r=s(2115);function a(e){let{radicals:t,onSelect:s}=e;return(0,l.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-2 gap-4",children:t.filter(e=>{let{count:t}=e;return t>3}).map(e=>{let{radical:t,count:r,reading:a}=e;return(0,l.jsx)("button",{onClick:()=>s(t),className:"bg-white hover:bg-blue-100 rounded-lg p-4 shadow text-center transition-colors",children:(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("span",{className:"ml-4 text-4xl font-bold mb-1",children:t}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["（漢字数：",r,"）"]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsxs)("span",{className:"ml-2text-gray-700 mb-1",children:["部首名: ",a]})})]})},t)})})}function n(e){let{onStart:t}=e;return(0,l.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8 mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ゲームの説明"}),(0,l.jsxs)("ul",{className:"text-left max-w-md mx-auto space-y-2 mb-6 list-disc list-inside",children:[(0,l.jsx)("li",{children:"ひらがなで読み方を入力"}),(0,l.jsx)("li",{children:"制限時間は 60 秒"}),(0,l.jsx)("li",{children:"同じ漢字は 1 度だけカウント"}),(0,l.jsx)("li",{children:"高学年の漢字は高得点"})]}),(0,l.jsx)("button",{onClick:t,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"ゲームスタート！"})]})}var c=s(4186),i=s(8186),d=s(3904);function o(e){let{timeLeft:t,isTimeUnlimited:s,score:r,onReset:a,onToggleTimeMode:n}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"text-red-500",size:24}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-red-500",children:[t,"秒"]}),(0,l.jsx)("button",{onClick:n,className:"bg-yellow-500 hover:bg-yellow-600 text-white text-sm font-bold py-2 px-2 rounded-lg",children:s?"タイマーON":"タイマーOFF"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(i.A,{className:"text-yellow-500",size:24}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-yellow-600",children:[r,"点"]})]})]}),(0,l.jsxs)("button",{onClick:a,className:"flex items-center space-x-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,l.jsx)(d.A,{size:16}),(0,l.jsx)("span",{children:"終了（答えを見る）"})]})]})}var x=s(8564);function m(e){let{visible:t,kanji:s,calcPoint:r}=e;return t&&s?(0,l.jsxs)("div",{className:"text-center bg-green-100 rounded-lg p-6 mb-6 border-2 border-green-300",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,l.jsx)(x.A,{className:"text-yellow-500",size:24}),(0,l.jsx)("span",{className:"text-2xl font-bold text-green-700",children:"正解！"}),(0,l.jsx)(x.A,{className:"text-yellow-500",size:24})]}),(0,l.jsx)("div",{className:"text-6xl font-bold text-green-800 mb-2",children:s.char}),(0,l.jsxs)("p",{className:"text-green-700 font-semibold",children:["読み: ",s.readings.join("、")]}),(0,l.jsxs)("p",{className:"text-green-600",children:["+",r(s.grade),"点"]})]}):null}function h(e){let{foundKanji:t,total:s}=e;return 0===t.length?null:(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-semibold mb-3",children:["見つけた漢字 (",t.length," / ",s,")"]}),(0,l.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:t.map(e=>(0,l.jsxs)("div",{className:"text-center bg-white rounded-lg p-3 shadow",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:e.char}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[0]})]},e.char))})]})}function u(e){let{allKanji:t,foundKanji:s}=e,r=new Set(s.map(e=>e.char)),a={};t.forEach(e=>{let t=e.grade;a[t]||(a[t]=[]),a[t].push(e)});let n=e=>{switch(e){case 1:return"小学1年";case 2:return"小学2年";case 3:return"小学3年";case 4:return"小学4年";case 5:return"小学5年";case 6:return"小学6年";case 7:return"中学生以上";default:return"その他"}};return(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"全漢字一覧（学年別）"}),Object.entries(a).sort((e,t)=>Number(e[0])-Number(t[0])).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 border-b border-gray-300 pb-1",children:n(Number(t))}),(0,l.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:s.map(e=>{let t=r.has(e.char);return(0,l.jsxs)("div",{className:"text-center rounded-lg p-3 shadow transition-all ".concat(t?"bg-white text-blue-800 border border-blue-200":"bg-red-100 text-red-600 border border-red-300"),children:[(0,l.jsx)("div",{className:"text-3xl font-bold mb-1",children:e.char}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e.readings[1]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.readings[0].replace(/[\u3041-\u3096]/g,e=>String.fromCharCode(e.charCodeAt(0)+96))})]},e.char)})})]},t)})]})}var b=s(7948),g=s(5718);function j(e){let{score:t,currentRadical:s,foundKanji:r,allKanji:a,isGameClear:n,onReplay:c,onReturn:i}=e,[d,o]=(0,g.lW)();return(0,l.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8",children:[(n||t>=15)&&(0,l.jsx)(b.A,{width:d,height:o,numberOfPieces:1e3,recycle:!1}),(0,l.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"ゲーム終了！"}),(0,l.jsxs)("div",{className:"text-6xl font-bold text-blue-600 mb-4",children:[t,"点"]}),(0,l.jsx)("p",{className:"text-2xl text-gray-700 mb-2",children:t>=20?"漢字マスター！":t>=15?"素晴らしい！":t>=10?"よくできました！":t>=5?"がんばりました！":"また挑戦してね！"}),(0,l.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["部首「",s,"」で ",r.length," / ",a.length," 個の漢字を発見しました！"]}),(0,l.jsx)(u,{allKanji:a,foundKanji:r}),(0,l.jsxs)("div",{className:"space-x-4",children:[(0,l.jsx)("button",{onClick:c,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"もう一度プレイ"}),(0,l.jsx)("button",{onClick:i,className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"部首選択へ戻る"})]})]})}function f(e){let{value:t,onChange:s,onSubmit:a,isHintVisible:n,hints:c,onToggleHint:i}=e,d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e;null==(e=d.current)||e.focus()},[]),(0,l.jsxs)("div",{className:"text-center mb-4",children:[(0,l.jsx)("input",{ref:d,type:"text",value:t,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"===e.key&&a()},placeholder:"読み方をひらがなで入力",className:"text-2xl p-4 border-2 border-gray-300 rounded-lg w-80 text-center focus:border-blue-500 focus:outline-none"}),(0,l.jsxs)("div",{className:"mt-4 mb-4",children:[(0,l.jsx)("button",{onClick:a,disabled:!t.trim(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-bold py-3 px-8 rounded-lg text-xl transition-colors",children:"答える"}),(0,l.jsx)("button",{onClick:i,className:"ml-10 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-6 rounded-lg mb-2",children:n?"ヒントを隠す":"ヒントを見る"})]}),(0,l.jsx)("div",{children:n&&c.length>0&&(0,l.jsxs)("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 p-4 rounded-lg mb-4 text-left w-full",children:[(0,l.jsx)("p",{className:"font-semibold mb-2",children:"ヒント（意味のみ）:"}),(0,l.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:c.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]})})]})}let p=e=>e<=2?1:e<=4?2:3;function N(){let[e,t]=(0,r.useState)({}),[s,c]=(0,r.useState)({}),[i,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[N,v]=(0,r.useState)(""),[y,w]=(0,r.useState)([]),[C,S]=(0,r.useState)(null),[k,E]=(0,r.useState)(!1),[A,O]=(0,r.useState)(0),[T,K]=(0,r.useState)(60),[_,z]=(0,r.useState)([]),[R,P]=(0,r.useState)(!1),[L,F]=(0,r.useState)(!1),[H,G]=(0,r.useState)(!1);(0,r.useEffect)(()=>{fetch("/busyu.json").then(e=>e.json()).then(e=>{let s={},l={};e.forEach(e=>{l[e.radical]=e.reading,s[e.radical]=e.kanji.map(e=>{var t;let s=e=>e.replace(/[ァ-ヶ]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),l=[...e["音読み"]||[],...e["訓読み"]||[]].map(e=>s(e.replace(/（.*?）/g,"")).toLowerCase()),r=(e["学年"]||"").replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).match(/\d+/),a=r?parseInt(r[0],10):7;return{char:e.char,readings:l,meaning:((null==(t=e["意味"])?void 0:t[0])||"").replace(/。$/,""),grade:a}})}),t(s),c(l)}).catch(()=>alert("busyu.json の読み込みに失敗しました"))},[]),(0,r.useEffect)(()=>{if(x&&!b&&!H&&T>0){let e=setTimeout(()=>K(e=>e-1),1e3);return()=>clearTimeout(e)}!x||b||H||0!==T||M()},[x,b,T,H]),(0,r.useEffect)(()=>{var t;if(!i||b)return;let s=(null==(t=e[i])?void 0:t.length)||0,l=y.length;s>0&&l===s&&(F(!0),M())},[y,i,e,b]);let I=e=>{d(e),u(!0),g(!1),v(""),w([]),S(null),E(!1),O(0),K(120),P(!1),z([])},M=()=>{u(!1),g(!0)},U=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i&&z([...e[i].filter(e=>!y.some(t=>t.char===e.char)&&e.char!==t)].sort((e,t)=>e.grade-t.grade).slice(0,2).map(e=>"".concat(e.meaning,"（").concat(7===e.grade?"中学生漢字":e.grade+"年生","）")))},V=Object.entries(e).map(e=>{let[t,l]=e;return{radical:t,count:l.length,reading:s[t]||"？"}}).sort((e,t)=>t.count-e.count),W=i?e[i]:[];return i?(0,l.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen",children:[(0,l.jsx)("div",{className:"text-center mb-8",children:(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"部首漢字ゲーム"})}),!x&&!b&&(0,l.jsx)(n,{onStart:()=>u(!0)}),x&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsx)(o,{timeLeft:T,isTimeUnlimited:H,onToggleTimeMode:()=>G(e=>!e),score:A,onReset:M}),(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsxs)("h2",{className:"font-semibold mb-2 text-gray-600",children:["部首「",i,"」（",s[i]||"?","）の漢字を答えよう！"]}),(0,l.jsx)("div",{className:"inline-block bg-blue-100 rounded-lg p-8 mb-2",children:(0,l.jsx)("span",{className:"text-8xl font-bold text-blue-800",children:i})}),(0,l.jsxs)("p",{className:"text-gray-700 mt-2",children:["全 ",W.length," 個の漢字があります"]})]}),(0,l.jsx)(f,{value:N,onChange:v,onSubmit:()=>{if(!i||!N.trim())return;let t=N.trim().toLowerCase(),s=(e[i]||[]).find(e=>!y.some(t=>t.char===e.char)&&e.readings.includes(t));if(s){let e=p(s.grade);O(t=>t+e),w(e=>[...e,s]),S(s),E(!0),R&&U(s.char),setTimeout(()=>{E(!1),S(null)},1800)}v("")},isHintVisible:R,hints:_,onToggleHint:()=>{i&&(R||U(),P(!R))}}),(0,l.jsx)(m,{visible:k,kanji:C,calcPoint:p}),(0,l.jsx)(h,{foundKanji:y,total:W.length})]})}),b&&(0,l.jsx)(j,{score:A,currentRadical:i,foundKanji:y,allKanji:W,isGameClear:L,onReplay:()=>I(i),onReturn:()=>{d(null),u(!1),g(!1),v(""),w([]),S(null),E(!1),O(0),K(120),P(!1),z([])}})]}):(0,l.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen",children:[(0,l.jsx)("h1",{className:"text-center text-4xl font-bold mb-8",children:"部首を選択"}),(0,l.jsx)(a,{radicals:V,onSelect:I})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[497,441,684,358],()=>t(4909)),_N_E=e.O()}]);