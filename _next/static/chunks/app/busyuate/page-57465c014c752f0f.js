(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{6026:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5155),s=a(2115),l=a(7924),n=a(8999);function i(e){return[...e].sort(()=>Math.random()-.5)}let c=(e,t)=>{let a=[],r=e.map(e=>e.reading),s=new Set;for(;a.length<t;){let t=e[Math.floor(Math.random()*e.length)],l=t.reading,n=t.kanji[Math.floor(Math.random()*t.kanji.length)];if(!n||s.has(n.char))continue;s.add(n.char);let c=i(r.filter(e=>e!==l)).slice(0,3),d=i([l,...c]);a.push({kanji:n.char,correctreading:l,choices:d})}return a};function d(e){let{filteredData:t}=e,a=(0,n.useRouter)(),[l,i]=(0,s.useState)([]),[d,o]=(0,s.useState)(0),[m,h]=(0,s.useState)(0),[g,u]=(0,s.useState)(null),[f,j]=(0,s.useState)([]),[b,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i(c(t,10))},[t]);let N=e=>{if(g)return;u(e);let t=l[d],a=t.correctreading,r=e===a;j(s=>[...s,{kanji:t.kanji,correct:a,choice:e,isCorrect:r}]),r&&h(e=>e+1),setTimeout(()=>{d+1>=10?p(!0):(o(e=>e+1),u(null))},1e3)};if(!l.length)return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,r.jsx)("p",{className:"text-xl font-medium text-gray-600",children:"読み込み中..."})});if(b)return(0,r.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-100 p-4",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("h2",{className:"mb-2 text-3xl font-bold text-gray-800",children:"クイズ終了！"}),(0,r.jsxs)("p",{className:"mb-6 text-lg text-gray-600",children:["正解数 ",m," / ",10]}),(0,r.jsx)("button",{onClick:()=>{i(c(t,10)),o(0),h(0),u(null),j([]),p(!1)},className:"rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white hover:bg-blue-700",children:"もう一度プレイ"})]}),(0,r.jsx)(x,{history:f})]});let y=l[d];return(0,r.jsxs)("div",{className:"flex min-h-screen flex-col items-center bg-gray-100 p-4",children:[(0,r.jsxs)("div",{className:"mb-4 flex w-full max-w-2xl items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>a.back(),className:"rounded-md bg-gray-200 px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:"戻る"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["問題 ",d+1," / ",10,"・スコア ",m]})]}),(0,r.jsxs)("div",{className:"w-full max-w-2xl rounded-lg bg-white p-8 shadow",children:[(0,r.jsx)("div",{className:"mb-6 h-2 w-full rounded bg-gray-200",children:(0,r.jsx)("div",{className:"h-full rounded bg-green-500 transition-all",style:{width:"".concat((d+1)/10*100,"%")}})}),(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("div",{className:"mb-4 text-7xl font-bold text-gray-800",children:y.kanji}),(0,r.jsx)("p",{className:"text-gray-600",children:"この漢字の部首の読み方は？"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:y.choices.map(e=>{let t=e===y.correctreading,a=g===e,s="bg-white text-gray-800 hover:bg-gray-100";return g&&(s=a?t?"bg-green-500 text-white":"bg-red-500 text-white":"bg-gray-100 text-gray-400"),(0,r.jsx)("button",{onClick:()=>N(e),className:"".concat("rounded-lg border px-4 py-3 text-lg font-medium transition"," ").concat(s),disabled:!!g,children:e},e)})})]}),(0,r.jsx)(x,{history:f,className:"mt-8 w-full max-w-2xl"})]})}function x(e){let{history:t,className:a=""}=e;return t.length?(0,r.jsx)("ul",{className:"space-y-2 ".concat(a),children:t.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center justify-between rounded bg-white px-4 py-2 shadow",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-gray-800",children:[(0,r.jsxs)("span",{className:"text-xl",children:["No ",t+1," : "]}),e.kanji]}),(0,r.jsxs)("div",{className:"flex flex-col text-right",children:[(0,r.jsx)("span",{className:"text-sm ".concat(e.isCorrect?"text-green-600":"text-red-600"),children:e.isCorrect?"正解":"不正解"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["あなたの回答: ",e.choice]}),!e.isCorrect&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["正しい答え: ",e.correct]})]})]},t))}):null}let o={1:"小学1年",2:"小学2年",3:"小学3年",4:"小学4年",5:"小学5年",6:"小学6年",7:"中学生以上"};function m(){let[e,t]=(0,s.useState)(null),a=(0,s.useMemo)(()=>{let e=e=>e.replace(/[ァ-ヶ]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),t=e=>e.replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248));return l.X.map(a=>{let r=a.kanji.map(a=>{var r;let s=[...a.onyomi||[],...a.kunyomi||[]].map(t=>e(t.replace(/（.*?）/g,"")).toLowerCase()),l=t(a.grade||"").match(/\d+/),n=l?parseInt(l[0],10):7;return{char:a.char,readings:s,meaning:((null==(r=a.meaning)?void 0:r[0])||"").replace(/。$/,""),grade:n}});return{radical:a.radical,reading:a.reading,kanji:r}})},[]),n=e=>{t(e)};if(null!==e){let t=a.filter(t=>t.kanji.some(t=>t.grade===e)).flatMap(t=>t.kanji.filter(t=>t.grade===e).map(e=>({radical:t.radical,reading:t.reading,kanji:[e]})));return(0,r.jsx)(d,{filteredData:t})}return(0,r.jsxs)("div",{className:"max-w-xl mx-auto p-6 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"学年を選んでください"}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[1,2,3,4,5,6,7].map(e=>(0,r.jsx)("button",{onClick:()=>n(e),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 font-semibold py-3 rounded-lg shadow",children:o[e]},e))})]})}},9613:(e,t,a)=>{Promise.resolve().then(a.bind(a,6026))}},e=>{var t=t=>e(e.s=t);e.O(0,[924,441,684,358],()=>t(9613)),_N_E=e.O()}]);