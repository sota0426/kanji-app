(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{2650:(e,t,r)=>{Promise.resolve().then(r.bind(r,4929))},4929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),l=r(2115),s=r(7924);function n(e){let{history:t,className:r=""}=e;return t.length?(0,a.jsxs)("div",{className:"mt-8 bg-white/90 backdrop-blur-sm rounded-xl shadow-md p-4 ".concat(r),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"回答履歴"}),(0,a.jsx)("ul",{className:"space-y-2 pr-2",children:t.map((e,t)=>{var r;return(0,a.jsxs)("li",{className:"flex justify-between items-center p-3 rounded-lg border ".concat(e.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-bold text-gray-700",children:["Q",t+1,". ",e.kanji||"意味なし"]}),e.isCorrect?(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["正解: ",e.correct]}):(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["選択: ",null!=(r=e.choice)?r:"未選択"," 　⇒　 正解: ",e.correct]})]}),(0,a.jsx)("div",{className:"text-xl",children:e.isCorrect?"✔️":"❌"})]},"".concat(e.correct,"-").concat(t))})})]}):null}function i(e){return[...e].sort(()=>Math.random()-.5)}let c=(e,t)=>{let r=[],a=e.map(e=>e.reading),l=new Set;for(;r.length<t;){let t=e[Math.floor(Math.random()*e.length)],s=t.reading,n=t.kanji[Math.floor(Math.random()*t.kanji.length)];if(!n||l.has(n.char+s))continue;l.add(n.char+s);let c=i(a.filter(e=>e!==s)).slice(0,3),d=i([s,...c]);r.push({kanji:n.char,reading:n.readings,correctreading:s,choices:d})}return r};function d(e){let{filteredData:t,onBack:r}=e,[s,i]=(0,l.useState)([]),[d,o]=(0,l.useState)(0),[x,g]=(0,l.useState)(0),[m,h]=(0,l.useState)(null),[u,b]=(0,l.useState)([]),[f,j]=(0,l.useState)(!1),[p,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i(c(t,10))},[t]);let y=s[d],N=e=>{if(m)return;h(e),v(!0);let t=y.correctreading,r=e===t;b(a=>[...a,{kanji:y.kanji,correct:t,choice:e,isCorrect:r}]),r&&g(e=>e+1),setTimeout(()=>{d+1>=10?j(!0):(o(e=>e+1),h(null),v(!1))},1500)};return s.length?f?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-xl text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"クイズ終了！"}),(0,a.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["正解数: ",x," / ",10]}),(0,a.jsxs)("div",{className:"flex gap-4 justify-center mb-6",children:[(0,a.jsx)("button",{onClick:()=>{i(c(t,10)),o(0),g(0),h(null),v(!1),b([]),j(!1)},className:"bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-xl",children:"もう一度"}),(0,a.jsx)("button",{onClick:r,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-xl",children:"戻る"})]}),(0,a.jsx)(n,{history:u})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6 flex flex-col items-center",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm shadow-md rounded-xl p-4 mb-6 flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:r,className:"text-sm text-gray-600 hover:underline",children:"← 戻る"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:[d+1," / ",10,"・スコア ",x]})]}),(0,a.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full mb-4",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full",style:{width:"".concat((d+1)/10*100,"%")}})}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-6xl font-bold text-gray-800 mb-2",children:y.kanji}),(0,a.jsxs)("div",{className:"font-bold text-gray-800 mb-2",children:["(",y.reading[0],",",y.reading[1],")"]}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"この漢字の部首の読み方は？"})]}),p?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsx)("div",{className:"text-3xl font-bold mb-2 ".concat(m===y.correctreading?"text-green-600":"text-red-600"),children:m===y.correctreading?"\uD83C\uDF89 正解！":"❌ 不正解"})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:y.choices.map((e,t)=>{let r=e===y.correctreading,l=m===e,s="bg-gray-100 text-gray-600 border border-gray-300";return r?s="bg-green-500 text-white border-green-600":l&&(s="bg-red-500 text-white border-red-600"),(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(s," flex items-center justify-between"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-7 h-7 flex items-center justify-center rounded-full bg-white text-sm font-bold text-gray-800",children:String.fromCharCode(65+t)}),(0,a.jsx)("div",{className:"font-medium",children:e})]}),r?"✓":l?"✗":""]},e)})})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:y.choices.map((e,t)=>(0,a.jsx)("button",{onClick:()=>N(e),disabled:!!m,className:"p-4 bg-white border-2 border-indigo-200 rounded-lg hover:bg-indigo-50 hover:border-indigo-400 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-7 h-7 flex items-center justify-center bg-indigo-100 text-indigo-600 rounded-full font-bold",children:String.fromCharCode(65+t)}),(0,a.jsx)("div",{className:"text-lg font-medium",children:e})]})},"".concat(e," - ").concat(t)))})})]}),(0,a.jsx)(n,{history:u,className:"mt-8"})]})}):(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-blue-50",children:(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"読み込み中..."})})}var o=r(5695);let x={1:"小学1年",2:"小学2年",3:"小学3年",4:"小学4年",5:"小学5年",6:"小学6年",7:"中学生以上"},g={1:{icon:"\uD83C\uDF31",gradient:"from-green-400 to-green-600",bg:"bg-green-50",text:"text-green-700"},2:{icon:"\uD83C\uDF3C",gradient:"from-yellow-400 to-yellow-500",bg:"bg-yellow-50",text:"text-yellow-700"},3:{icon:"\uD83D\uDCD8",gradient:"from-blue-400 to-blue-500",bg:"bg-blue-50",text:"text-blue-700"},4:{icon:"\uD83D\uDCD7",gradient:"from-emerald-400 to-emerald-500",bg:"bg-emerald-50",text:"text-emerald-700"},5:{icon:"\uD83D\uDD2E",gradient:"from-purple-400 to-purple-600",bg:"bg-purple-50",text:"text-purple-700"},6:{icon:"\uD83E\uDDE0",gradient:"from-pink-400 to-pink-600",bg:"bg-pink-50",text:"text-pink-700"},7:{icon:"\uD83D\uDC51",gradient:"from-gray-700 to-black",bg:"bg-gray-100",text:"text-gray-800"}},m=e=>{let{onSelect:t}=e,r=(0,o.useRouter)();return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-pink-50 to-indigo-50 flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,a.jsx)("button",{onClick:()=>r.push("/"),className:"rounded-md mb-2  bg-gray-200 px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:"← タイトルに戻る"}),(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-rose-400 to-pink-500 rounded-2xl mb-6 shadow-lg",children:(0,a.jsx)("span",{className:"text-3xl text-white font-bold",children:"部"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"部首あてクイズ"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"学年（漢字の習得目安）を選んで、部首クイズを始めましょう！"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6,7].map(e=>{let r=g[e];return(0,a.jsxs)("button",{onClick:()=>t(e),className:"group relative ".concat(r.bg," rounded-2xl p-6 shadow-md hover:shadow-xl transition-all duration-300 transform hover:scale-105 hover:-translate-y-1"),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(r.gradient," opacity-0 group-hover:opacity-10 rounded-2xl transition-opacity")}),(0,a.jsx)("div",{className:"text-4xl mb-3",children:r.icon}),(0,a.jsx)("div",{className:"".concat(r.text," text-xl font-bold mb-2"),children:x[e]}),(0,a.jsx)("div",{className:"text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"クイズを開始 →"})]},e)})}),(0,a.jsx)("div",{className:"text-center mt-12 text-sm text-gray-500",children:"※ 学年が上がるほど難しい漢字が出題されます"})]})})};function h(){let[e,t]=(0,l.useState)(null),r=(0,l.useMemo)(()=>{let e=e=>e.replace(/[ァ-ヶ]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),t=e=>e.replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248));return s.X.map(r=>{let a=r.kanji.map(r=>{var a;let l=[...r.onyomi||[],...r.kunyomi||[]].map(t=>e(t.replace(/（.*?）/g,"")).toLowerCase()),s=t(r.grade||"").match(/\d+/),n=s?parseInt(s[0],10):7;return{char:r.char,readings:l,meaning:((null==(a=r.meaning)?void 0:a[0])||"").replace(/。$/,""),grade:n,kanken:n}});return{radical:r.radical,reading:r.reading,kanji:a}})},[]);if(null!==e){let l=r.filter(t=>t.kanji.some(t=>t.grade===e)).flatMap(t=>t.kanji.filter(t=>t.grade===e).map(e=>({radical:t.radical,reading:t.reading,kanji:[e]})));return(0,a.jsx)(d,{filteredData:l,onBack:()=>t(null)})}return(0,a.jsx)(m,{onSelect:e=>{t(e)}})}}},e=>{var t=t=>e(e.s=t);e.O(0,[674,441,684,358],()=>t(2650)),_N_E=e.O()}]);