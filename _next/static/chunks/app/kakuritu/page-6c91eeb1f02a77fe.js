(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{8767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var s=n(5155),a=n(2115),l=n(7948);function r(e){let{message:t,show:n}=e;return n?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30 z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-lg px-8 py-6 text-3xl font-bold text-green-600 animate-bounce",children:t})}):null}let i=e=>({1:"A",11:"J",12:"Q",13:"K"})[e]||String(e);function d(e,t){return Math.floor(Math.random()*(t-e+1))+e}function o(e){if("easy"===e){let e=Array.from({length:13},(e,t)=>t+1),t=[];for(let n=0;n<5;n++){let n=d(0,e.length-1);t.push(e[n]),e.splice(n,1)}return t}{let e=function(){let e={};for(let t=1;t<=13;t++)e[t]=4;return e}(),t=[];for(let n=0;n<5;n++){let n=[];for(let t=1;t<=13;t++)e[t]>0&&n.push(t);let s=n[d(0,n.length-1)];t.push(s),e[s]--}return t}}function c(e,t,n){let s=e.length,a=Array(s).fill(!1),l=new Set,r=[];return!function i(d){if(d===t){(!n||n(r))&&l.add(r.join(","));return}for(let t=0;t<s;t++)a[t]||(a[t]=!0,r.push(e[t]),i(d+1),r.pop(),a[t]=!1)}(0),l.size}function m(e,t,n){let s=e.length,a=new Set,l=[];return!function r(i){if(l.length===t){let t=l.map(t=>e[t]);if(!n||n(t)){let e=[...t].sort((e,t)=>e-t).join(",");a.add(e)}return}for(let e=i;e<s;e++)l.push(e),r(e+1),l.pop()}(0),a.size}function x(e,t){if(t<0||t>e)return 0;t=Math.min(t,e-t);let n=1,s=1;for(let a=1;a<=t;a++)n*=e-t+a,s*=a;return Math.round(n/s)}let u=e=>1<<e;function h(e,t){if(0===t)return{n:NaN,d:t};let n=t<0?-1:1,s=function e(t,n){return 0===n?Math.abs(t):e(n,t%n)}(Math.abs(e*=n),Math.abs(t*=n))||1;return{n:e/s,d:t/s}}function p(e){let t=e.trim();if(t.includes("/")){let[e,n]=t.split("/").map(e=>Number(e.trim()));if(!Number.isFinite(e)||!Number.isFinite(n))return null;let{n:s,d:a}=h(e,n);return{n:s,d:a}}{let e=Number(t);return Number.isFinite(e)?h(e,1):null}}function b(e){return"target"in e&&"count"in e}function g(){let[e,t]=(0,a.useState)("menu"),[n,d]=(0,a.useState)("easy"),[g,j]=(0,a.useState)(!1),[f,k]=(0,a.useState)(!1),[N,v]=(0,a.useState)({kind:"perm5"}),[y,w]=(0,a.useState)({kind:"exactK",n:4,k:2}),[C,M]=(0,a.useState)([]),[F,E]=(0,a.useState)(""),[S,K]=(0,a.useState)(!1),[A,O]=(0,a.useState)(0),[L,q]=(0,a.useState)(0),[_,T]=(0,a.useState)(null);function z(e){t(e),O(0),q(0),E(""),K(!1),k(!1),("cards"===e||"mixed"===e)&&M(o(n))}function J(){T(!1),("cards"===e||"mixed"===e&&L%2==0)&&M(o(n)),E(""),K(!1),q(e=>Math.min(4,e+1))}function P(){let e=0,t="",n="";if("perm5"===N.kind)e=function(e){let t=e.length,n={};for(let t of e)n[t]=(n[t]||0)+1;let s=e=>e<=1?1:e*s(e-1),a=1;for(let e of Object.values(n))a*=s(e);return s(t)/a}(C),t="5枚 [".concat(C.map(i).join(" "),"] を並び替える通り数は？"),n="多重集合の順列 n!/(a!b!…) で数える（全部ちがうなら 5!）。";else if("permFrom5"===N.kind)e=c(C,N.k),t="5枚 [".concat(C.map(i).join(" "),"] から ").concat(N.k," 枚を順に並べる通り数は？"),n="同じ見た目の並びは1通りにまとめて数える（重複除去）。";else if("combFrom5"===N.kind)e=m(C,N.k),t="5枚 [".concat(C.map(i).join(" "),"] から ").concat(N.k," 枚を取り出す（順序なし）通り数は？"),n="順序なし、同じ数は一つの集合として数える。";else if("permNoAdjEqual"===N.kind)e=c(C,5,e=>e.every((t,n)=>0===n||t!==e[n-1])),t="5枚 [".concat(C.map(i).join(" "),"] を、同じ数が隣り合わないように並べる通り数は？"),n="隣どうしが同じになる並びを除いて数える。";else if("sumEvenOdd"===N.kind)e=m(C,N.k,e=>e.reduce((e,t)=>e+t,0)%2==+!N.even),t="5枚から ".concat(N.k," 枚取り出し、合計が").concat(N.even?"偶数":"奇数","になる通り数は？"),n="取り出した集合の合計の偶奇でフィルタして数える。";else if("mustContain"===N.kind)e=m(C,N.k,e=>e.filter(e=>e===N.target).length===N.count),t="5枚から ".concat(N.k," 枚取り出し、「").concat(i(N.target),"」をちょうど ").concat(N.count," 枚含む通り数は？"),n="特定の数の枚数を条件にして組合せを数える。";else if("posNoEndsA"===N.kind)e=c(C,5,e=>5===e.length&&1!==e[0]&&1!==e[4]),t="5枚を並べる。A(=1)が両はしに来ない並びは何通り？",n="位置条件でフィルタして数える。";else if("firstNotMax"===N.kind){let s=Math.max(...C);e=c(C,5,e=>5===e.length&&e[0]!==s),t="5枚を並べる。先頭が最大の数でない並びは何通り？",n="先頭の値に条件をつけて数える。"}else e=c(C,5,e=>5===e.length&&e[0]<e[4]),t="5枚を並べる。先頭の数 < 最後の数 となる並びは何通り？",n="両端の大小関係でフィルタ。";return{qtext:t,answer:String(e),explanation:n,isFraction:!1}}function Q(){let{n:e,k:t}=y,n=u(e),s=0;if("exactK"===y.kind)s=x(e,t);else if("atLeastK"===y.kind)for(let n=t;n<=e;n++)s+=x(e,n);else for(let n=0;n<=t;n++)s+=x(e,n);let{n:a,d:l}=h(s,n),r="exactK"===y.kind?"ちょうど ".concat(t," 個 表"):"atLeastK"===y.kind?"少なくとも ".concat(t," 個 表"):"高々 ".concat(t," 個 表");return{qtext:"コインを ".concat(e," 回投げて、").concat(r," となる確率は？（分数 a/b で答える）"),answer:"".concat(a,"/").concat(l),explanation:"全事象は2^".concat(e,"=").concat(n,"通り、当たりは").concat(s,"通り → 約分して ").concat(a,"/").concat(l),isFraction:!0}}let{qtext:B,answer:D,explanation:G,isFraction:H}=(0,a.useMemo)(()=>"cards"===e?P():"coins"===e?Q():"mixed"===e?L%2==0?P():Q():{qtext:"",answer:"",explanation:"",isFraction:!1},[e,C,N,y,L]);return"menu"===e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:(0,s.jsxs)("div",{className:"mx-auto max-w-3xl p-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"場合の数クイズ（メニュー）"}),(0,s.jsxs)("section",{className:"mb-6 rounded-2xl border bg-white p-4 shadow grid gap-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"カード設定"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,s.jsx)("label",{className:"text-sm",children:"難易度"}),(0,s.jsxs)("select",{className:"rounded-xl border px-3 py-2 text-sm",value:n,onChange:e=>d(e.target.value),children:[(0,s.jsx)("option",{value:"easy",children:"やさしい（全部ちがう）"}),(0,s.jsx)("option",{value:"normal",children:"ふつう（同じ数もOK）"})]}),(0,s.jsx)("label",{className:"text-sm ml-4",children:"お題"}),(0,s.jsxs)("select",{className:"rounded-xl border px-3 py-2 text-sm",value:N.kind,onChange:e=>{let t=e.target.value;"perm5"===t?v({kind:"perm5"}):"permFrom5"===t?v({kind:"permFrom5",k:3}):"combFrom5"===t?v({kind:"combFrom5",k:3}):"permNoAdjEqual"===t?v({kind:"permNoAdjEqual"}):"sumEvenOdd"===t?v({kind:"sumEvenOdd",k:3,even:!0}):"mustContain"===t?v({kind:"mustContain",k:3,target:7,count:1}):"posNoEndsA"===t?v({kind:"posNoEndsA"}):"firstNotMax"===t?v({kind:"firstNotMax"}):v({kind:"firstLessThanLast"})},children:[(0,s.jsx)("option",{value:"perm5",children:"5枚を並べ替える"}),(0,s.jsx)("option",{value:"permFrom5",children:"5枚から k 枚を順に"}),(0,s.jsx)("option",{value:"combFrom5",children:"5枚から k 枚（順序なし）"}),(0,s.jsx)("option",{value:"permNoAdjEqual",children:"同数が隣り合わない並べ方"}),(0,s.jsx)("option",{value:"sumEvenOdd",children:"合計の偶奇を指定"}),(0,s.jsx)("option",{value:"mustContain",children:"特定ランクをちょうど c 枚含む"}),(0,s.jsx)("option",{value:"posNoEndsA",children:"A が両端禁止"}),(0,s.jsx)("option",{value:"firstNotMax",children:"先頭は最大でない"}),(0,s.jsx)("option",{value:"firstLessThanLast",children:"先頭 < 最後"})]})]}),"k"in N&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-sm",children:"k"}),(0,s.jsx)("input",{type:"number",className:"w-20 rounded-xl border px-3 py-2 text-sm",min:1,max:5,value:N.k,onChange:e=>{let t=Math.max(1,Math.min(5,Number(e.target.value)));"permFrom5"===N.kind&&v({kind:"permFrom5",k:t}),"combFrom5"===N.kind&&v({kind:"combFrom5",k:t}),"sumEvenOdd"===N.kind&&"even"in N&&v({kind:"sumEvenOdd",k:t,even:N.even}),"mustContain"===N.kind&&b(N)&&v({kind:"mustContain",k:t,target:N.target,count:N.count})}})]}),"sumEvenOdd"===N.kind&&"k"in N&&"even"in N&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-sm",children:"偶奇"}),(0,s.jsxs)("select",{className:"rounded-xl border px-3 py-2 text-sm",value:N.even?"even":"odd",onChange:e=>v({kind:"sumEvenOdd",k:N.k,even:"even"===e.target.value}),children:[(0,s.jsx)("option",{value:"even",children:"偶数"}),(0,s.jsx)("option",{value:"odd",children:"奇数"})]})]}),"mustContain"===N.kind&&"k"in N&&b(N)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-sm",children:"ターゲット数"}),(0,s.jsx)("input",{type:"number",min:1,max:13,className:"w-20 rounded-xl border px-3 py-2 text-sm",value:N.target,onChange:e=>v({kind:"mustContain",k:N.k,target:Math.max(1,Math.min(13,Number(e.target.value))),count:N.count})}),(0,s.jsx)("span",{className:"text-sm",children:"枚数"}),(0,s.jsx)("input",{type:"number",min:0,max:5,className:"w-20 rounded-xl border px-3 py-2 text-sm",value:N.count,onChange:e=>v({kind:"mustContain",k:N.k,target:N.target,count:Math.max(0,Math.min(5,Number(e.target.value)))})})]})]}),(0,s.jsxs)("section",{className:"mb-6 rounded-2xl border bg-white p-4 shadow grid gap-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"コイン設定（分数で答える）"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,s.jsx)("label",{className:"text-sm",children:"お題"}),(0,s.jsxs)("select",{className:"rounded-xl border px-3 py-2 text-sm",value:y.kind,onChange:e=>{let t=e.target.value;"exactK"===t?w({kind:"exactK",n:4,k:2}):"atLeastK"===t?w({kind:"atLeastK",n:4,k:2}):w({kind:"atMostK",n:4,k:2})},children:[(0,s.jsx)("option",{value:"exactK",children:"ちょうど k 個 表"}),(0,s.jsx)("option",{value:"atLeastK",children:"少なくとも k 個 表"}),(0,s.jsx)("option",{value:"atMostK",children:"高々 k 個 表"})]}),(0,s.jsx)("span",{className:"text-sm",children:"n（回数）"}),(0,s.jsx)("input",{type:"number",min:1,max:15,className:"w-24 rounded-xl border px-3 py-2 text-sm",value:y.n,onChange:e=>{let t=Math.max(1,Math.min(15,Number(e.target.value)));w({...y,n:t,k:Math.min(y.k,t)})}}),(0,s.jsx)("span",{className:"text-sm",children:"k"}),(0,s.jsx)("input",{type:"number",min:0,max:y.n,className:"w-20 rounded-xl border px-3 py-2 text-sm",value:y.k,onChange:e=>{let t=Math.max(0,Math.min(y.n,Number(e.target.value)));w({...y,k:t})}})]})]}),(0,s.jsxs)("section",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)("button",{onClick:()=>z("cards"),className:"rounded-xl border bg-blue-600 text-white px-5 py-3 shadow",children:"トランプ 5問に挑戦"}),(0,s.jsx)("button",{onClick:()=>z("coins"),className:"rounded-xl border bg-green-600 text-white px-5 py-3 shadow",children:"コイン 5問に挑戦"}),(0,s.jsx)("button",{onClick:()=>z("mixed"),className:"rounded-xl border bg-purple-600 text-white px-5 py-3 shadow",children:"ミックス（交互に5問）"})]})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-3xl p-6",children:[f&&(0,s.jsx)(l.A,{}),(0,s.jsxs)("header",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsxs)("h1",{className:"text-xl font-bold",children:["問題 ",L+1,"/",5,"（得点 ",A,"）"]}),(0,s.jsx)("button",{className:"text-sm underline",onClick:()=>t("menu"),children:"メニューへ戻る"})]}),(0,s.jsxs)("section",{className:"mb-4 rounded-2xl border bg-white p-4 shadow grid gap-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"問題"}),(0,s.jsx)("p",{className:"text-base",children:B}),("cards"===e||"mixed"===e&&L%2==0)&&(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-2xl font-mono tracking-wider",children:C.map((e,t)=>(0,s.jsx)("span",{className:"mr-2 inline-block rounded-xl bg-gray-100 px-3 py-1",children:i(e)},t))}),(0,s.jsxs)("div",{className:"text-sm opacity-70",children:["難易度：","easy"===n?"やさしい（全異）":"ふつう（重複あり）"]})]})]}),(0,s.jsxs)("section",{className:"mb-6 rounded-2xl border bg-white p-4 shadow grid gap-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("input",{type:H?"text":"number",inputMode:H?"text":"numeric",value:F,onChange:e=>E(e.target.value),placeholder:H?"分数で入力（例 3/8）":"数字で答えてね",className:"w-56 rounded-xl border px-3 py-2 text-base"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:function(){let e=!1;if(H){let t=p(F),n=p(D);e=!!t&&t.n===n.n&&t.d===n.d}else e=F.trim()===String(D);e?(K(!0),j(!0),T(!1),setTimeout(()=>j(!1),800),O(e=>e+1),4===L?(e?A+1:A)===5&&k(!0):setTimeout(()=>J(),2e3)):T(!0)},className:"rounded-xl border bg-emerald-600 px-4 py-2 font-semibold text-white shadow hover:bg-emerald-700",children:"こたえ合わせ"}),(0,s.jsx)("button",{onClick:()=>{K(!0),E(String(D))},className:"rounded-xl border px-3 py-2 text-sm hover:bg-gray-50",children:"こたえを見る"}),L<4&&(0,s.jsx)("button",{onClick:J,className:"ml-auto rounded-xl border px-3 py-2 text-sm hover:bg-gray-50",children:"次の問題 ▶"})]}),S&&(0,s.jsxs)("div",{className:"mt-3 rounded-xl bg-gray-50 p-3",children:[(0,s.jsxs)("div",{className:"text-base",children:["正解：",(0,s.jsx)("span",{className:"font-bold",children:D})]}),(0,s.jsx)("div",{className:"text-sm opacity-80",children:G}),""!==F&&(0,s.jsxs)("div",{className:"mt-2 text-sm",children:["あなたの答え：",(0,s.jsx)("b",{children:F})]})]}),_&&(0,s.jsx)("div",{className:"mt-3 text-red-600 font-bold",children:"❌ 間違いです。もう一度チャレンジしてね！"})]}),4===L&&(0,s.jsxs)("section",{className:"rounded-2xl border bg-white p-4 shadow text-center",children:[(0,s.jsxs)("div",{className:"text-lg font-semibold",children:["ゲーム終了！ 得点 ",A,"/",5]}),(0,s.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:"全問正解でクラッカーが鳴るよ！"}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{className:"rounded-xl border bg-blue-600 text-white px-4 py-2",onClick:()=>t("menu"),children:"もう一度メニューへ"})})]}),(0,s.jsx)("footer",{className:"mt-6 grid gap-1 text-center text-xs text-gray-500",children:(0,s.jsx)("div",{children:"\xa9 2025 場合の数トランプ&コインクイズ"})})]}),(0,s.jsx)(r,{message:"正解！",show:g})]})}},9916:(e,t,n)=>{Promise.resolve().then(n.bind(n,8767))}},e=>{var t=t=>e(e.s=t);e.O(0,[948,441,684,358],()=>t(9916)),_N_E=e.O()}]);